{% extends 'layout.html' %}

{% block header%}
<header>
  <div class="title">CREATOR</div>
  <button id="headerBtn">회원가입</button>
</header>
{% endblock %}

{% block mainContent %}
<main>
  <form action="/auth/login" id="loginForm" method="post">
    <div class="loginInputContainer">
      <label for="login_id">ID</label>
      <input type="text" id="login_id" name="id">
    </div>
    <div class="loginInputContainer">
      <label for="login_password">비밀번호</label>
      <input type="password" id="login_password" name="password">
    </div>
    <button id="loginBtn" type="submit">로그인</button>
  </form>
  <form action="/auth/join" style="display: none;" id="joinForm" method="post">
    <div class="joinInputContainer">
      <label for="join_nick">닉네임</label>
      <input type="text" id="join_nick" name="nick" placeholder="2~16자 / 영어, 숫자,한글로 구성 / 한글 초성 및 모음 불가">
    </div>
    <div class="joinInputContainer">
      <label for="join_id">ID</label>
      <input type="text" id="join_id" name="id">
    </div>
    <div class="joinInputContainer">
      <label for="join_password">비밀번호</label>
      <input type="password" id="join_password" name="password">
    </div>
    <div class="joinInputContainer">
      <label for="join_passwordCheck">비밀번호 확인</label>
      <input type="password" id="join_passwordCheck" name="passwordCheck">
    </div>
    <button id="joinBtn" type="submit">회원가입</button>
  </form>
</main>
{% endblock %}

{% block script %}
<script>
  const headerBtn = document.querySelector('#headerBtn')
  const loginForm = document.querySelector('#loginForm')
  const joinForm = document.querySelector('#joinForm')

  const changeMode = (event) => {
    const btn = event.target
    if (btn.innerText === '회원가입') {
      loginForm.style.display = 'none'
      joinForm.style.display = 'flex'
      btn.innerText = '로그인'
    } else {
      loginForm.style.display = 'flex'
      joinForm.style.display = 'none'
      btn.innerText = '회원가입'
    }
  }
  headerBtn.addEventListener('click', changeMode)

  window.onload = () => {
    const error = new URL(location.href).searchParams.get('error')
    if (error === 'joinBlank') {
      alert('닉네임, 아이디, 비밀번호, 비밀번호 확인 란을 모두 작성하세요.')
    } else if (error === 'exist') {
      alert('이미 존재하는 아이디입니다.');
    } else if (error === 'loginError') {
      alert('해당 아이디가 존재하지 않거나, 비밀번호가 일치하지 않습니다.');
    }
  };
</script>
{% endblock %}